[{"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\index.js":"1","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\reportWebVitals.js":"2","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\App.js":"3","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\routes\\AppRoutes.js":"4","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\providers\\AuthProvider.js":"5","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\NotFound.js":"6","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\ForgotPassword.js":"7","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\components\\SessionExpired.js":"8","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\translations\\i18n.js":"9","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\Login.js":"10","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\hooks\\useAuthState.js":"11","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\Dashboard\\index.js":"12"},{"size":795,"mtime":1630992747997,"results":"13","hashOfConfig":"14"},{"size":362,"mtime":1630930561987,"results":"15","hashOfConfig":"14"},{"size":221,"mtime":1630992962184,"results":"16","hashOfConfig":"14"},{"size":2591,"mtime":1630995598632,"results":"17","hashOfConfig":"14"},{"size":2886,"mtime":1630992354291,"results":"18","hashOfConfig":"14"},{"size":148,"mtime":1630992505219,"results":"19","hashOfConfig":"14"},{"size":160,"mtime":1630992525974,"results":"20","hashOfConfig":"14"},{"size":505,"mtime":1630992181997,"results":"21","hashOfConfig":"14"},{"size":719,"mtime":1630992003461,"results":"22","hashOfConfig":"14"},{"size":3415,"mtime":1631000715965,"results":"23","hashOfConfig":"14"},{"size":278,"mtime":1630995375814,"results":"24","hashOfConfig":"14"},{"size":150,"mtime":1630995572941,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"u3x1pr",{"filePath":"29","messages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\index.js",[],["52","53"],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\reportWebVitals.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\App.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\routes\\AppRoutes.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\providers\\AuthProvider.js",["54"],"import React, { useEffect, useState, useCallback, createContext } from 'react';\r\nimport Cookies from 'universal-cookie';\r\nimport SessionExpired from '../components/SessionExpired';\r\n\r\nexport const AuthContext = createContext({\r\n    authState: null,\r\n    addAuth: () => { },\r\n    removeAuth: () => { }\r\n});\r\n\r\nexport default function AuthProvider({ children }) {\r\n    const cookies = new Cookies();\r\n    const token = cookies.get('token');\r\n    const anonymousPaths = ['/', '/forgot-password'];\r\n\r\n    const [authState, setAuthState] = useState({ status: 'success', error: null, user: null });\r\n\r\n    console.log(window.location.pathname);\r\n\r\n    useEffect(() => {\r\n        console.log('Called');\r\n        if (token) {\r\n            const user = {\r\n                roles: cookies.get('roles'),\r\n                phone: cookies.get('phone'),\r\n                lastName: cookies.get('lastName'),\r\n                firstName: cookies.get('firstName'),\r\n                email: cookies.get('email'),\r\n                token: token\r\n            };\r\n            setAuthState({ status: 'success', error: null, user })\r\n        } else {\r\n            setAuthState({ status: 'error', error: { message: 'Invalid user session' }, user: null });\r\n        }\r\n    }, []);\r\n\r\n    const addAuth = ({ error, user, status }) => {\r\n        console.log('provider', { error, user, status });\r\n        setAuthState({ error, user, status });\r\n    };\r\n\r\n    const removeAuth = () => {\r\n        setAuthState({ status: 'error', error: { message: 'Invalid user session' }, user: null })\r\n    };\r\n\r\n    const contextValue = {\r\n        authState,\r\n        addAuth: useCallback(({ error, user, status }) => addAuth({ error, user, status }), []),\r\n        removeAuth: useCallback(() => removeAuth(), [])\r\n    };\r\n\r\n    const handleBackToLogin = (e) => {\r\n        window.location.replace('/');\r\n        e.preventDefault();\r\n    }\r\n\r\n    const getComponent = () => {\r\n        if (authState.status === 'pending') {\r\n            return 'Loading...'\r\n        }\r\n        if (authState.status === 'error' && anonymousPaths.indexOf(window.location.pathname) === -1) {\r\n            return (<SessionExpired message={authState.error?.message || 'Please login again.'} handleBackToLogin={handleBackToLogin}/>);\r\n        }\r\n        if (authState.status === 'success' && !authState.user) {\r\n            return (<SessionExpired message={authState.error?.message || 'Please login again.'} handleBackToLogin={handleBackToLogin}/>);\r\n        }\r\n        if (authState.status === 'error' && anonymousPaths.indexOf(window.location.pathname) !== -1) {\r\n            return children;\r\n        }\r\n        if (authState.status === 'success' && authState.user) {\r\n            return children;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={contextValue}>\r\n            {getComponent()}\r\n        </AuthContext.Provider>\r\n    )\r\n}","C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\NotFound.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\ForgotPassword.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\components\\SessionExpired.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\translations\\i18n.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\Login.js",["55"],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\common\\hooks\\useAuthState.js",[],"C:\\Users\\Nath's\\Documents\\SilkRoad\\portal\\src\\pages\\Dashboard\\index.js",[],{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","severity":1,"message":"61","line":35,"column":8,"nodeType":"62","endLine":35,"endColumn":10,"suggestions":"63"},{"ruleId":"64","severity":1,"message":"65","line":66,"column":40,"nodeType":"66","messageId":"67","endLine":66,"endColumn":45},"no-native-reassign",["68"],"no-negated-in-lhs",["69"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'cookies' and 'token'. Either include them or remove the dependency array.","ArrayExpression",["70"],"no-unused-vars","'error' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"71","fix":"72"},"Update the dependencies array to be: [cookies, token]",{"range":"73","text":"74"},[1245,1247],"[cookies, token]"]